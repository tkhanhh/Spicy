-- Services
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local CoreGui = game:GetService("CoreGui")
local Players = game:GetService("Players")

-- UI Creation
local ScreenGui = Instance.new("ScreenGui")
local MainFrame = Instance.new("Frame")
local UICorner = Instance.new("UICorner")
local UIStroke = Instance.new("UIStroke")
local Title = Instance.new("TextLabel")
local Description = Instance.new("TextLabel")
local LinkFrame = Instance.new("Frame")
local LinkCorner = Instance.new("UICorner")
local LinkText = Instance.new("TextLabel")
local CopyButton = Instance.new("TextButton")
local CopyCorner = Instance.new("UICorner")
local CloseButton = Instance.new("TextButton")
local Shadow = Instance.new("ImageLabel")

-- Protect UI (Put in CoreGui if exploit, otherwise PlayerGui)
if gethui then
	ScreenGui.Parent = gethui()
elseif syn and syn.protect_gui then
	syn.protect_gui(ScreenGui)
	ScreenGui.Parent = CoreGui
else
	ScreenGui.Parent = Players.LocalPlayer:WaitForChild("PlayerGui")
end

ScreenGui.Name = "ChilliHubNotification"
ScreenGui.ResetOnSpawn = false
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

--// Styling: White Glass / Modern Clean //--

-- Main Frame
MainFrame.Name = "MainFrame"
MainFrame.Parent = ScreenGui
MainFrame.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
MainFrame.BackgroundTransparency = 0.15 -- Glass effect
MainFrame.BorderSizePixel = 0
MainFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
MainFrame.Size = UDim2.new(0, 0, 0, 0) -- Start small for animation
MainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
MainFrame.ClipsDescendants = true

-- Corners
UICorner.CornerRadius = UDim.new(0, 16)
UICorner.Parent = MainFrame

-- Stroke (Border)
UIStroke.Parent = MainFrame
UIStroke.Color = Color3.fromRGB(200, 200, 200)
UIStroke.Thickness = 1
UIStroke.Transparency = 0.5

-- Title
Title.Name = "Title"
Title.Parent = MainFrame
Title.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Title.BackgroundTransparency = 1.000
Title.Position = UDim2.new(0.08, 0, 0.1, 0)
Title.Size = UDim2.new(0.84, 0, 0.15, 0)
Title.Font = Enum.Font.GothamBold
Title.Text = "We'll be back soon"
Title.TextColor3 = Color3.fromRGB(30, 30, 30)
Title.TextScaled = true
Title.TextXAlignment = Enum.TextXAlignment.Left

-- Description
Description.Name = "Description"
Description.Parent = MainFrame
Description.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Description.BackgroundTransparency = 1.000
Description.Position = UDim2.new(0.08, 0, 0.28, 0)
Description.Size = UDim2.new(0.84, 0, 0.25, 0)
Description.Font = Enum.Font.GothamMedium
Description.Text = "Chilli Hub will return in a few hours.\nThank you for your patience and support!\nPlease check our Discord for updates."
Description.TextColor3 = Color3.fromRGB(100, 100, 100)
Description.TextSize = 14.000
Description.TextWrapped = true
Description.TextXAlignment = Enum.TextXAlignment.Left

-- Link Container
LinkFrame.Name = "LinkFrame"
LinkFrame.Parent = MainFrame
LinkFrame.BackgroundColor3 = Color3.fromRGB(245, 245, 245)
LinkFrame.Position = UDim2.new(0.08, 0, 0.65, 0)
LinkFrame.Size = UDim2.new(0.84, 0, 0.18, 0)

LinkCorner.CornerRadius = UDim.new(0, 8)
LinkCorner.Parent = LinkFrame

-- Link Text
LinkText.Name = "LinkText"
LinkText.Parent = LinkFrame
LinkText.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
LinkText.BackgroundTransparency = 1.000
LinkText.Position = UDim2.new(0.05, 0, 0, 0)
LinkText.Size = UDim2.new(0.6, 0, 1, 0)
LinkText.Font = Enum.Font.GothamBold
LinkText.Text = "discord.gg/chilli-hub"
LinkText.TextColor3 = Color3.fromRGB(88, 101, 242) -- Discord Blue
LinkText.TextSize = 14.000
LinkText.TextXAlignment = Enum.TextXAlignment.Left

-- Copy Button
CopyButton.Name = "CopyButton"
CopyButton.Parent = LinkFrame
CopyButton.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
CopyButton.Position = UDim2.new(0.7, 0, 0.15, 0)
CopyButton.Size = UDim2.new(0.25, 0, 0.7, 0)
CopyButton.Font = Enum.Font.GothamBold
CopyButton.Text = "COPY"
CopyButton.TextColor3 = Color3.fromRGB(255, 255, 255)
CopyButton.TextSize = 12.000
CopyButton.AutoButtonColor = false

CopyCorner.CornerRadius = UDim.new(0, 6)
CopyCorner.Parent = CopyButton

-- Close Button (X)
CloseButton.Name = "CloseButton"
CloseButton.Parent = MainFrame
CloseButton.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
CloseButton.BackgroundTransparency = 1.000
CloseButton.Position = UDim2.new(0.9, 0, 0.02, 0)
CloseButton.Size = UDim2.new(0, 30, 0, 30)
CloseButton.Font = Enum.Font.GothamBold
CloseButton.Text = "X"
CloseButton.TextColor3 = Color3.fromRGB(150, 150, 150)
CloseButton.TextSize = 18.000

--// Logic & Animation //--

-- 1. Opening Animation (Pop Up)
local targetSize = UDim2.new(0, 400, 0, 220)
local openInfo = TweenInfo.new(0.5, Enum.EasingStyle.Back, Enum.EasingDirection.Out)
TweenService:Create(MainFrame, openInfo, {Size = targetSize}):Play()

-- 2. Draggable Logic
local dragging, dragInput, dragStart, startPos

local function update(input)
	local delta = input.Position - dragStart
	MainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
end

MainFrame.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
		dragging = true
		dragStart = input.Position
		startPos = MainFrame.Position
		
		input.Changed:Connect(function()
			if input.UserInputState == Enum.UserInputState.End then
				dragging = false
			end
		end)
	end
end)

MainFrame.InputChanged:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
		dragInput = input
	end
end)

UserInputService.InputChanged:Connect(function(input)
	if input == dragInput and dragging then
		update(input)
	end
end)

-- 3. Copy Button Logic
CopyButton.MouseButton1Click:Connect(function()
	-- Attempt to copy to clipboard
	pcall(function()
		setclipboard("https://discord.gg/chilli-hub")
	end)
	
	-- Button Feedback Animation
	CopyButton.Text = "COPIED!"
	CopyButton.BackgroundColor3 = Color3.fromRGB(88, 200, 88) -- Green
	
	task.wait(1.5)
	
	-- Reset Button
	CopyButton.Text = "COPY"
	CopyButton.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
end)

-- 4. Close Logic
CloseButton.MouseButton1Click:Connect(function()
	local closeInfo = TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.In)
	local tween = TweenService:Create(MainFrame, closeInfo, {Size = UDim2.new(0,0,0,0), BackgroundTransparency = 1})
	tween:Play()
	
	-- Fade out text
	for _, v in pairs(MainFrame:GetDescendants()) do
		if v:IsA("TextLabel") or v:IsA("TextButton") then
			TweenService:Create(v, closeInfo, {TextTransparency = 1, BackgroundTransparency = 1}):Play()
		end
	end
	
	tween.Completed:Wait()
	ScreenGui:Destroy()
end)
